<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LA CASA DAS BET - Surebets Profissionais</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, push, set, onValue, remove } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyArY5MJpAlRnQhWV3TYrsh9LYH9Sw2nAeo",
      authDomain: "surebet-4916a.firebaseapp.com",
      databaseURL: "https://surebet-4916a-default-rtdb.firebaseio.com",
      projectId: "surebet-4916a",
      storageBucket: "surebet-4916a.appspot.com",
      messagingSenderId: "975170682118",
      appId: "1:975170682118:web:1a551a221f1436bd8f3287",
      measurementId: "G-VQR0H34N9Q"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const surebetsRef = ref(db, "surebets");

    let isAdminMode = false;

    function formatDateTime(datetime) {
      const date = new Date(datetime);
      return date.toLocaleString("pt-BR", {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    }

    function renderSurebets(snapshot) {
      const container = document.getElementById("surebets-container");
      if (!snapshot.exists()) {
        container.innerHTML = `
          <div class="empty-state">
            <h3>üé∞ Nenhuma Surebet Dispon√≠vel</h3>
            <p>As melhores oportunidades aparecer√£o aqui!</p>
          </div>`;
        return;
      }
      const data = snapshot.val();
      container.innerHTML = "";
      Object.entries(data).forEach(([key, s]) => {
        const div = document.createElement("div");
        div.className = "surebet-card";
        div.innerHTML = `
          ${isAdminMode ? `<button class="remove-btn" onclick="remove(ref(db, 'surebets/${key}'))">üóëÔ∏è Apagar</button>` : ''}
          <div class="card-header">
            <div class="calc-icon">üßÆ</div>
            <div class="profit-badge">
              <div class="profit-label">Lucro de</div>
              <div class="profit-value">${s.profit}%</div>
            </div>
            <div class="match-title">${s.match}</div>
            <div class="match-datetime">${formatDateTime(s.datetime)}</div>
            <div class="sport-category">${s.sport}</div>
          </div>
          <div class="card-body">
            <div class="bet-row">
              <div class="house-name">${s.house1}</div>
              <div class="bet-description">${s.market1}</div>
              <div class="odd-value">${s.odd1} (odd)</div>
            </div>
            <div class="bet-row">
              <div class="house-name">${s.house2}</div>
              <div class="bet-description">${s.market2}</div>
              <div class="odd-value">${s.odd2} (odd)</div>
            </div>
          </div>
          <div class="sport-footer">${s.sport}</div>`;
        container.appendChild(div);
      });
    }

    function addSurebet(event) {
      event.preventDefault();
      const surebet = {
        match: document.getElementById('match').value,
        datetime: document.getElementById('datetime').value,
        sport: document.getElementById('sport').value,
        house1: document.getElementById('house1').value,
        market1: document.getElementById('market1').value,
        odd1: parseFloat(document.getElementById('odd1').value),
        house2: document.getElementById('house2').value,
        market2: document.getElementById('market2').value,
        odd2: parseFloat(document.getElementById('odd2').value),
        profit: parseFloat(document.getElementById('profit').value)
      };
      push(surebetsRef, surebet);
      document.getElementById('surebet-form').reset();
    }

    function checkPassword() {
      const password = document.getElementById('password-input').value;
      if (password === '37511158') {
        document.getElementById('admin-panel').style.display = 'block';
        document.body.classList.add('admin-mode');
        isAdminMode = true;
        renderSurebets({ val: () => surebets });
        document.getElementById('password-modal').style.display = 'none';
      } else {
        alert('‚ùå Senha incorreta!');
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById('surebet-form').addEventListener('submit', addSurebet);
      onValue(surebetsRef, renderSurebets);
    });
  </script>
</head>
<body>
  <!-- Layout original continua aqui -->
  <!-- A calculadora ser√° modificada com o aviso no HTML carregado externamente -->
</body>
</html>